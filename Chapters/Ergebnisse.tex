\chapter{Beschreibung der verschiedenen Messungen und Ergebnisdarstellung}

\section{Part 1}


\subsection{Konfiguration der Hosts}\label{hostconfig}

Zunächst werden die Host mit statischen IP-Adressen konfiguriert:

\begin{itemize}
  \item Host 1
  	\begin{itemize}
    	\item IP-Adresse: 172.16.0.2
    	\item Subnetz-Maske: 255.255.0.0
    	\item Default Gateway: 172.16.0.1
    \end{itemize}
  \item Host 2
  	\begin{itemize}
    	\item IP-Adresse: 172.18.0.2
    	\item Subnetz-Maske: 255.255.0.0
    	\item Default Gateway: 172.18.0.1
    \end{itemize}
\end{itemize}

\subsection{Konfiguration der Router}

\subsubsection{Basis-Einstellungen}

Bei beiden Routern ist zunächst der \textbf{Hostname} zu ändern. Dies geschieht
über den Global Configuration Mode. Mit dem Kommando \textit{hostname R1} bzw.
\textit{hostname R2} werden die Hostnamen zu R1 bzw. R2 geändert.
\newline
Danach werden die \textbf{Passwörter} (console und vty) konfiguriert und
aktiviert.%TODO Auszüge
\newline
Es folgt die Konfiguration eines \textbf{\acs{MOTD}}-Banners:
%TODO Auszug
\newline
Um zu gewährleisten, dass die Router \textbf{keine Namensauflösung via
DNS-Server} betreiben, wird das Kommando \textit{no ip domain lookup} genutzt.
\newline
%TODO logging synchronous

\paragraph{Running Configuration}\mbox{} \\
Die Ausgabe der running-config zeigt folgendes bzgl. der konfigurierten
Passwörter:

\begin{lstlisting}
enable secret 5 $1$r.BO$ZHkNZfQvcrvrVhJWWQDtg/
enable password cisco
\end{lstlisting}

Das Passwort für den allgemeinen Routerzugriff ist entschlüsselt in der
Konfigurations-Datei zu finden. Verschlüsselt hingegen ist das Passwort für den
Priviliedged EXEC Mode. Weitere Passwörter sind in dieser Datei nicht zu finden.

\clearpage

\subsubsection{Konfiguration der Serial Interfaces}\label{serial}

Den Routern R1 und R2 müssen die jeweiligen IP-Adressen zugewiesen werden. 
\newline
R1 wird 172.17.0.1 zugewiesen. Die Clock Rate muss nur an dem Router
konfiguriert werden, mit dem die DCE-Schnittstelle des Serial-Kabels verbunden
ist (in diesem Fall R1).\cite{cisco}
\newline
\newline
\underline{Informationen des Serial Interfaces von R1:}
\newline
\newline
Durch das Kommando \textit{show interfaces serial 0/0/0} kann die durchgeführte
Konfiguration überprüft werden.

\begin{lstlisting}
R1#show interfaces serial 0/0/0
Serial0/0/0 is down, line protocol is down
  Hardware is GT96K Serial
  Description: WAN link to R2
  Internet address is 172.17.0.1/16
  MTU 1500 bytes, BW 128 Kbit/sec, DLY 20000 usec,
     reliability 255/255, txload 1/255, rxload 1/255
  Encapsulation HDLC, loopback not set
 [...]
  
\end{lstlisting}\footnote{Zur Übersichtlichkeit sind nur Ausschnitte der
Ausgabe aufgeführt, gekennzeichnet mit [\ldots]}
%TODO Referrenz auf anahng machen
Zu diesem Zeitpunkt ist die Serial 0/0/0 Schnittstelle noch inakiv (down), da
die Schnittstelle bei Router 2 noch nicht konfiguriert wurde.\\Nachdem R2 äquivalent
zu R1 konfiguriert ist, sind bei Schnittstellen aktiv (up).
\newline
\ac{HDLC} ist der ``Default Serial Encapsulation'' Standard von Cisco Routern.
%
% https://www.cisco.com/c/en/us/support/docs/wan/high-level-data-link-control-hdlc/7927-hdlc-back.html

\paragraph{Überprüfung der Verbindung}\mbox{} \\

Um die Konfiguration zu testen, werden ping-Befehle von R1 zu R2 und umgekehrt
über das \acs{CLI} ausgeführt.

\begin{lstlisting}
R1#ping 172.17.0.2
Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 172.17.0.2, timeout is 2 seconds:
!!!!!
Success rate is 100 percent (5/5), round-trip min/avg/max = 28/28/28 ms
\end{lstlisting}

\begin{lstlisting}
R2#ping 172.17.0.1
Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 172.17.0.1, timeout is 2 seconds:
!!!!!
Success rate is 100 percent (5/5), round-trip min/avg/max = 28/28/28 ms
\end{lstlisting}

Die Aufgaben zeigen, dass die Konfiguration korrekt erfolgt ist und eine
Verbindung möglich ist.

\subsubsection{Konfiguration der Fast-Ethernet Interfaces}

Die Konfiguration der Fast-Ethernet-Schnittstellen erfolgt
äquvalent zu \ref{serial}. Die IP-Adresse 172.16.0.1 mit der Subnetzmaske
255.255.0.0 wird zugewisen.
\newline
Mit dem Kommando \textit{show interfaces FastEthernet 0/0} werden Informationen
über die Schnittstellen-Konfiguration ausgegeben:

\begin{lstlisting}
R1#show interfaces fastEthernet 0/0
FastEthernet0/0 is up, line protocol is down
  Hardware is MV96340 Ethernet, address is 0025.4569.13c0 (bia 0025.4569.13c0)
  Description: R1 LAN Default Gateway
  Internet address is 172.16.0.1/16
  MTU 1500 bytes, BW 100000 Kbit/sec, DLY 100 usec,
     reliability 255/255, txload 1/255, rxload 1/255
  Encapsulation ARPA, loopback not set
  [...]
\end{lstlisting}

Die Schnittstelle ist nach der Konfiguration aktiviert. \ac{ARPA} ist der
Default Encapsulation Standard von Ethernet II bei Cisco Routern.
%which uses a 16-bit protocol type code
% https://www.cisco.com/c/en/us/td/docs/ios/12_2/interface/configuration/guide/finter_c/icflanin.html
\newline
\newline
Danach wird die Schnittstelle bei Router 2 entsprechend konfiguriert.

\paragraph{Überprüfung der Verbindung}\mbox{} \\
Mittels ping-Befehlen wird getestet, ob eine Verbindung zu den
Fast-Ethernet-Schnittstelle der Router möglich ist.

\begin{lstlisting}
C:\Dokumente und Einstellungen\cisco>ping 172.16.0.1

Ping wird ausgeführt für 172.16.0.1 mit 32 Bytes Daten:

Antwort von 172.16.0.1: Bytes=32 Zeit=4ms TTL=255
Antwort von 172.16.0.1: Bytes=32 Zeit=1ms TTL=255
Antwort von 172.16.0.1: Bytes=32 Zeit=1ms TTL=255
Antwort von 172.16.0.1: Bytes=32 Zeit=1ms TTL=255

Ping-Statistik für 172.16.0.1:
    Pakete: Gesendet = 4, Empfangen = 4, Verloren = 0 (0% Verlust),
Ca. Zeitangaben in Millisek.:
    Minimum = 1ms, Maximum = 4ms, Mittelwert = 1ms
\end{lstlisting}

\begin{lstlisting}
C:\Dokumente und Einstellungen\cisco>ping 172.18.0.1

Ping wird ausgeführt für 172.18.0.1 mit 32 Bytes Daten:

Antwort von 172.18.0.1: Bytes=32 Zeit=2ms TTL=255
Antwort von 172.18.0.1: Bytes=32 Zeit=1ms TTL=255
Antwort von 172.18.0.1: Bytes=32 Zeit=1ms TTL=255
Antwort von 172.18.0.1: Bytes=32 Zeit=1ms TTL=255

Ping-Statistik für 172.18.0.1:
    Pakete: Gesendet = 4, Empfangen = 4, Verloren = 0 (0% Verlust),
Ca. Zeitangaben in Millisek.:
    Minimum = 1ms, Maximum = 2ms, Mittelwert = 1ms
\end{lstlisting}

%TODO Step 14 noch vorwort dazu schreiben
Die Pings von R1 zur R2 Fast Ethernet-Schnittstelle und von H1 zu H2 
funktionieren nicht, da der Router R1 nicht weiß, wie der Weg zum R2-
Ethernet-Netzwerk (172.18.0.0) ist. Darüber hinaus kennt R2 das Ethernet
Netzwerk von R1 (172.16.0.0) nicht. Die Pings können nicht von R1 oder H1
zum R2-Ethernet-Netzwerk gelangen. Damit die Pings funktionieren muss ein 
Host-Computer zum anderen, Standard-Routen und / oder statische Routen auf
den Routern konfiguriert werden, oder es muss ein dynamisches 
Routing-Protokoll zwischen ihnen eingerichtet werden.

\clearpage

\section{Part 2}


\subsection{Netzwerkplanung}

Um die gegebnen Anforderungen aus \ref{subnet} umzusetzen, sind 3 Subnetze
notwendig:
\begin{itemize}
  \item 192.168.1.0/25
  	\begin{itemize}
    	\item maximale Hostanzahl: 126
    \end{itemize}
  \item 192.168.1.128/26
  	\begin{itemize}
    	\item maximale Hostanzahl: 62
    \end{itemize}
  \item 192.168.1.192/30
  	\begin{itemize}
    	\item maximale Hostanzahl: 2
    \end{itemize}
\end{itemize}

Die erste IP-Adresse des jeweiligen Subnetzes wird für den Router reserviert.
Den Hosts wird in diesem Fall die jeweils letzte mögliche IP-Adresse
zugewiesen.\\Dementsprechend erhält man folgende umzusetzende Konfiguration:

\begin{table}[!htbp]
\centering
\small
	\begin{tabularx}{1.05\textwidth}{|X|X|X|X|X|}
	\hline
	\textbf{Device} & \textbf{Hostname} & \textbf{Interface} & \textbf{IP-Address} &
	\textbf{Subnet Mask} \\
	\hline
	R1 	& R1  & Serial 0/0/0 & 192.168.1.193 & 255.255.255.252 \\
	\hline
	& & FastEthernet 0/0 & 192.168.1.1 & 255.255.255.128 \\
	\hline
	H1 & & Ethernet & 192.168.1.126 & 255.255.255.128 \\
	\hline
	H2 & & Ethernet & 192.168.1.190 & 255.255.255.192 \\
	\hline
	R2 & R2 & Serial 0/0/0 & 192.168.1.194 & 255.255.255.252 \\
	\hline
	 & & FastEthernet 0/0 & 192.168.1.129	& 255.255.255.192 \\
	\hline
	\end{tabularx}
\caption{Konfiguration der Netzkomponenten}
\label{config2}
\end{table}


\subsection{Konfiguration der Netzkomponenten}

Den Routern werden nach den entsprechenden Einträgen in \ref{config2}
konfiguriert. Das Vorgehen gestaltet sich wie im ersten Part des Laborversuchs.
\newline
Äquivalent zu \ref{hostconfig} werden die IP-Adressen der Hosts statisch
konfiguriert. Default-Gateway für Host 1 ist die IP-Adresse von Router 1
(192.168.1.1), für Host 2 die IP-Adresse von Router 2 (192.168.1.129).

\clearpage

%TODO Step 7 und 10 (bei 7 Routingtabelle leer bei 10 eintrag vorhanden in Tabelle)

\subsection{Routing Protokolle}

\ac{RIP} bezeichnet ein Routing Protokoll, das auf dem
Link-State-Algorithmus basiert. Es ist ein sog. ``interior gateway protocol''.\\
RIPv2 ist eine Weiterentwicklung der ersten Version und wurde 1998
standartisiert. Beide Protokolle besitzen das gleiche
Paketformat:\cite{malkin1998rfc}
 \begin{figure}[ht] 
  \centering
     \includegraphics[width=\linewidth]{Graphics/RIPv12_packet.PNG}
  \caption{RIPv1 und RIPv2 Paketformat}
  \label{fig:packet}
\end{figure}

Unterschiedlich sind die RIP Einträge. Bei RIPv1 haben die Einträge folgendes
Format:
 \begin{figure}[ht] 
  \centering
     \includegraphics[width=\linewidth]{Graphics/RIPv1_entry.PNG}
  \caption{RIPv1 Eintrag}
  \label{fig:entry1}
\end{figure}

\clearpage

Bei RIPv2 erfolgte eine Änderung der Einträge:
\begin{figure}[h!] 
  \centering
     \includegraphics[width=\linewidth]{Graphics/RIPv2_entry.PNG}
  \caption{RIPv2 Eintrag}
  \label{fig:entry2}
\end{figure}

% Einträge unterschiedlich
% Subnet Mask
% Authentication
% Route Tag
% Multicasting
% Queries
%TODO RIP erklären, RFC 1058, RFC 2453
%TODO Verbindungen testen, Routingtabellen, debug RIP, Reflection (Step 12)
\subsection{Konfiguration von RIPv2}
Um eine Ende-zu-Ende Verbindung zwischen Host 1 und Host 2 zu ermöglichen,
müssen zunächst die entsprechenden Routen eingerichtet werden. Hierzu wird RIPv2
genutzt.

\begin{lstlisting}
R1(config)#router rip
R1(config-router)# version 2
R1(config-router)# network 192.168.1.0
R1(config-router)# exit
R1(config)#exit
\end{lstlisting}

Bei Router wird RIP äquivalent mit der Netzwerkadresse 192.168.1.128
konfiguriert.

\subsubsection{Routingtabellen}
Aufgrund der Übersichtlichkeit sind die vollständigen Routingtabellen
(\textit{show ip route}) im Anhang unter \autoref{routing} zu finden.
\newline
\paragraph{Router 1}\mbox{} \\\\
\underline{Aufgeführte Netzwerke:}
\begin{itemize}
  \item 192.168.1.0/25
  \item 192.168.1.1/32
  \item 192.168.1.128/26
  \item 192.168.1.192/30
  \item 192.168.1.193/32
\end{itemize}

Die Zeile des Netzwerks 192.168.1.128/26 der Routingtabelle ist genauer zu
betrachten:
\begin{lstlisting}
R        192.168.1.128/26 [120/1] via 192.168.1.194, 00:00:22, Serial0/0/0
\end{lstlisting}

Das ``R'' in dieser Zeiler steht für \acs{RIP}. Geroutet wird über Router 2 mit
der IP-Adresse 192.168.1.194.
%TODO Serial erklären Würde ich nicht erklären

 \paragraph{Router 2}\mbox{} \\\\
\underline{Aufgeführte Netzwerke:}
\begin{itemize}
  \item 192.168.1.0/25
  \item 192.168.1.1/32
  \item 192.168.1.192/30
  \item 192.168.1.193/32
\end{itemize}

Die Routingtabelle von Router 2 beinhaltet die gleichen Netzwerke wie Router 1,
allerding nicht das Netz 192.168.1.128/26.


\subsection{Debug RIP}

Mit dem Kommando \textit{debug ip rip} werden die Routing Transaktionen
ausgegeben, die zwischen den Routern stattfinden, die RIP nutzen.\cite{cisco2}
%TODO Step 11

\subsection{Refelxion}%umbenennen
%TODO Step 12