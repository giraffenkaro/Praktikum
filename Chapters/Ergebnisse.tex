\chapter{Beschreibung der verschiedenen Messungen und Ergbnisdarstellung}

\section{Verbindungsauf- und abbau}

%TODO Sequenzdiagramm

\section{Adressierung der Endgeräte}\label{tei}
Im Adressfeld des HDLC-Protokolls befindet sich der \ac{TEI}. Jedem Endgerät ist
ein solcher Identifier zugeordnet um eine logische Verbindung zwischen
Vermittlungsstelle und Endgerät sicherzustellen. Der TEI kennzeichnet die
Schicht-2-Adresse für das ISDN-Gerät.\\%TODO Quelle: Net_IT, s.325
Der TEI-Wert kann entweder durch manuelle Einstellung am Gerät hinterlegt werden
oder von der Vermittlungsstelle zugeteilt werden (TEI-Vergabe). In diesem
Versuch stellt das Endgerät zuerst eine Identity Request, worauf die
Vermittlungsstelle bei Erfolg mit Identity Assigned antwortet. Die Vergabe
erfolgt mittels U-Frame.%TODO: mehr
Dem Gerät wird der TEI 64 zugeteilt. Dies ist der erste von der
Vermittlungsstelle zu vergebende Wert. Die Adressen 1-63 können eingestellt
werden, 64-126 werden von der Vermittlungsstelle verteilt. TEI 127 stellt die
Broadcast-Adresse dar.
\newline
\ac{SAPI} bezeichnet ein weiteres Element des HDLC-Adressfeldes und kennzeichnet
den momentan verwendeten ISDN-Schicht-2-Dienst.%TODO Quelle: siehe oben,s.326
Bei der TEI-Vergabe ist der Wert des SAPI 63. Dem Protokoll zufolge bedeutet
dies ``Layer 2 management procedures''. Es handelt sich hier um die Übertragung
von paketvermittelten Daten.%TODO Qzelle identisch

\begin{lstlisting}

No.     Time                       Source                Destination           Protocol Info
     56 2018-04-16 16:30:58.999168 User                  Network               TEI      Identity Request

Frame 56 (8 bytes on wire, 8 bytes captured)
    Arrival Time: Apr 16, 2018 16:30:58.999168000
    [Time delta from previous captured frame: 2.003968000 seconds]
    [Time delta from previous displayed frame: 2.003968000 seconds]
    [Time since reference or first frame: 19639.640168000 seconds]
    Frame Number: 56
    Frame Length: 8 bytes
    Capture Length: 8 bytes
    [Frame is marked: False]
    [Protocols in frame: isdn:lapd:tei_management]
    Point-to-Point Direction: Sent (0)
ISDN
    Channel: D (0)
Link Access Procedure, Channel D (LAPD)
    [Direction: User->Network (0)]
    Address Field: 0xfcff
        1111 11.. .... .... = SAPI: Layer 2 management procedures (63)
        .... ..0. .... .... = C/R: 0
        .... ...0 .... .... = EA1: 0
        .... .... 1111 111. = TEI: 127
        .... .... .... ...1 = EA2: 1
    Control field: U, func=UI (0x03)
        000. 00.. = Command: Unnumbered Information (0x00)
        .... ..11 = Frame type: Unnumbered frame (0x03)
TEI Management Procedure, Channel D (LAPD)

No.     Time                       Source                Destination           Protocol Info
     57 2018-04-16 16:30:59.005200 Network               User                  TEI      Identity Assigned

Frame 57 (8 bytes on wire, 8 bytes captured)
    Arrival Time: Apr 16, 2018 16:30:59.005200000
    [Time delta from previous captured frame: 0.006032000 seconds]
    [Time delta from previous displayed frame: 0.006032000 seconds]
    [Time since reference or first frame: 19639.646200000 seconds]
    Frame Number: 57
    Frame Length: 8 bytes
    Capture Length: 8 bytes
    [Frame is marked: False]
    [Protocols in frame: isdn:lapd:tei_management]
    Point-to-Point Direction: Received (1)
ISDN
    Channel: D (0)
Link Access Procedure, Channel D (LAPD)
    [Direction: Network->User (1)]
    Address Field: 0xfeff
        1111 11.. .... .... = SAPI: Layer 2 management procedures (63)
        .... ..1. .... .... = C/R: 1
        .... ...0 .... .... = EA1: 0
        .... .... 1111 111. = TEI: 127
        .... .... .... ...1 = EA2: 1
    Control field: U, func=UI (0x03)
        000. 00.. = Command: Unnumbered Information (0x00)
        .... ..11 = Frame type: Unnumbered frame (0x03)
TEI Management Procedure, Channel D (LAPD)
\end{lstlisting}

%TODO Fragen und ANtworten in einem Text erläutern, eventuell passende
% Unterkapitel wählen


\section{Auf- und Abbau der Schichten}
%TODO Schichten erläutern(anhand der Fragen und darüber hinaus)
%es folgen nur unzusammenhängende Textschnipsel, TODO ausformulieren uns
% Zusammenhang sarstellen
Nach der in \label{tei} beschriebenen TEI-Vergabeprozdeur ist der Aufbau der
Schicht 2 abgeschlossen.

Nach der Nutzkanalzuweisung ist der gesicherte Aufbau der Schicht 3
abgeschlossen.

\section{Nachrichtenelemente}

\begin{tabularx}{\textwidth}{ |X|X|X|X|X|X|X|X|X|X| }
  \hline
  Nachricht  &Aler \newline ting&Call Proc&Con-nect&DISC&In-fo&Re-lease&Rel.
  Comp.&Set-up&Setup Ack \\
  \hline 
  Bearer Capability  &&&&&&&& M &  \\
  \hline
  Cause &&&&&&&&&  \\
  \hline
  Channel Identification  &&&&&&&&&  \\
  \hline
  Process Indicator  &&&&&&&&&  \\
  \hline
  Display  &&&&&&&&&  \\
  \hline
  Date/Time  &&&&&&&&&  \\
  \hline
  Calling Party Number  &&&&&&&&&  \\
  \hline
  Calles Party Number  &&&&&&&&&  \\
  \hline
  Sending Complete  &&&&&&&&&  \\
  \hline
  Facility  &&&&&&&&&  \\
  \hline
  User to User Information  &&&&&&&&&  \\
  \hline
\end{tabularx}


%TODO Tabelle aus Aufgabenteil c erstellen und ausfüllen, kurzer Text dazu (ist
% das immer so blablabla)

\section{SETUP-Nachricht}%blöder Titel, Alternative finden und eventuell
% andere Nachrichten betrachten?


\begin{tabularx}{\textwidth}{ |X|X|X|X| }
  \hline
  & Bit-Nr. & Hex Code & Beschreibung \\
  \hline 
  Schicht-2-Header  & 0111 1110  & 0xFE  & Start-Flag  \\
  \hline
  Schicht-3-Paketkopf  &&&  \\
  \hline
  1. Info Element  &&&  \\
  \hline
  2. Info-Element  &&&  \\
  \hline
  3. Info-Element  &&&  \\
  \hline
  4. Info-Element  &&&  \\
  \hline
  Schicht-2-Trailer  & 0111 1110  &  & Ende-Flag  \\
  \hline
\end{tabularx}
%TODO Tabelle aus Aufgabenteil d & Text
